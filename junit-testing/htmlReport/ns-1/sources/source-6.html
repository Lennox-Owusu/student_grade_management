


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Main</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.testing</a>
</div>

<h1>Coverage Summary for Class: Main (org.testing)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Main</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/19)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/350)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/771)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Main$GPAMap</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">Main$InvalidGradeException</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">Main$StudentNotFoundException</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/23)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/350)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/776)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.testing;
&nbsp;
&nbsp;import java.io.BufferedWriter;
&nbsp;import java.io.FileWriter;
&nbsp;import java.io.IOException;
&nbsp;import java.nio.file.Files;
&nbsp;import java.nio.file.Path;
&nbsp;import java.nio.file.Paths;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;import java.nio.charset.StandardCharsets;
&nbsp;import java.time.LocalDateTime;
&nbsp;import java.time.format.DateTimeFormatter;
&nbsp;import java.io.BufferedReader;
&nbsp;import java.util.Scanner;
&nbsp;
<b class="nc">&nbsp;public class Main {</b>
&nbsp;    public static void main(String[] args) {
<b class="nc">&nbsp;        Scanner scanner = new Scanner(System.in);</b>
<b class="nc">&nbsp;        StudentManager studentManager = new StudentManager(50);</b>
<b class="nc">&nbsp;        GradeManager gradeManager = new GradeManager(200);</b>
<b class="nc">&nbsp;        preloadSampleStudents(studentManager);</b>
<b class="nc">&nbsp;        boolean exit = false;</b>
<b class="nc">&nbsp;        while (!exit) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;\n&quot; +</b>
<b class="nc">&nbsp;                    &quot;╔&quot; + &quot;═&quot;.repeat(38) + &quot;╗&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;║ STUDENT GRADE MANAGEMENT - MAIN MENU ║&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;╚&quot; + &quot;═&quot;.repeat(38) + &quot;╝&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;\n1. Add Student&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;2. View Students&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;3. Record Grade&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;4. View Grade Report&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;5. Export Grade Report&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;6. Calculate Student GPA&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;7. Bulk Import Grades&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;8. View Class Statistics&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;9. Search Students&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;10. Exit&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nEnter choice: &quot;);</b>
&nbsp;            int choice;
&nbsp;            try {
<b class="nc">&nbsp;                choice = Integer.parseInt(scanner.nextLine());</b>
&nbsp;            } catch (NumberFormatException e) {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid input. Please enter a number.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
&nbsp;
<b class="nc">&nbsp;            switch (choice) {</b>
<b class="nc">&nbsp;                case 1 -&gt; addStudent(scanner, studentManager);</b>
<b class="nc">&nbsp;                case 2 -&gt; viewStudents(studentManager);</b>
<b class="nc">&nbsp;                case 3 -&gt; recordGrade(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 4 -&gt; viewGradeReport(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 5 -&gt; exportGradeReport(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 6 -&gt; calculateStudentGPA(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 7 -&gt; bulkImportGrades(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 8 -&gt; viewClassStatistics(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 9 -&gt; searchStudents(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                case 10 -&gt; { System.out.println(&quot;Thank you for using Grade Management System!&quot;);</b>
<b class="nc">&nbsp;                    System.out.println(&quot;Goodbye!&quot;); exit = true; }</b>
<b class="nc">&nbsp;                default -&gt; System.out.println(&quot;Invalid choice. Please select between 1-9.&quot;);</b>
&nbsp;            }
&nbsp;
&nbsp;        }
&nbsp;        scanner.close();
&nbsp;    }
&nbsp;
&nbsp;    private static void preloadSampleStudents(StudentManager studentManager) {
<b class="nc">&nbsp;        studentManager.addStudent(new RegularStudent(&quot;Alice Johnson&quot;, 16, &quot;alice@school.edu&quot;, &quot;0241108345&quot;));</b>
<b class="nc">&nbsp;        studentManager.addStudent(new HonorsStudent(&quot;Bob Smith&quot;, 17, &quot;bob@school.edu&quot;, &quot;0256521345&quot;));</b>
<b class="nc">&nbsp;        studentManager.addStudent(new RegularStudent(&quot;Carol Martinez&quot;, 15, &quot;carol@school.edu&quot;, &quot;0545678345&quot;));</b>
<b class="nc">&nbsp;        studentManager.addStudent(new HonorsStudent(&quot;David Chen&quot;, 18, &quot;david@school.edu&quot;, &quot;0536789435&quot;));</b>
<b class="nc">&nbsp;        studentManager.addStudent(new RegularStudent(&quot;Emma Wilson&quot;, 16, &quot;emma@school.edu&quot;, &quot;0237896072&quot;));</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void addStudent(Scanner scanner, StudentManager studentManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nADD STUDENT&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(40));</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter student name: &quot;);</b>
<b class="nc">&nbsp;        String name = scanner.nextLine();</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter student age: &quot;);</b>
<b class="nc">&nbsp;        int age = Integer.parseInt(scanner.nextLine());</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter student email: &quot;);</b>
<b class="nc">&nbsp;        String email = scanner.nextLine();</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter student phone: &quot;);</b>
<b class="nc">&nbsp;        String phone = scanner.nextLine();</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nStudent type:&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;1. Regular Student (Passing grade: 50%): &quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;2. Honors Student (Passing grade: 60%, honors recognition): &quot;);</b>
<b class="nc">&nbsp;        System.out.print(&quot;Select type (1-2):&quot;);</b>
<b class="nc">&nbsp;        int type = Integer.parseInt(scanner.nextLine());</b>
&nbsp;        Student student;
<b class="nc">&nbsp;        if (type == 1) {</b>
<b class="nc">&nbsp;            student = new RegularStudent(name, age, email, phone);</b>
<b class="nc">&nbsp;        } else if (type == 2) {</b>
<b class="nc">&nbsp;            student = new HonorsStudent(name, age, email, phone);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;Invalid type selected.&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        studentManager.addStudent(student);</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nStudent added successfully!&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Student ID: &quot; + student.getStudentId());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Name: &quot; + student.getName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Age: &quot; + student.getAge());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Email: &quot; + student.getEmail());</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Passing Grade: %.0f%%%n&quot;, student.getPassingGrade());</b>
<b class="nc">&nbsp;        if (student instanceof HonorsStudent) {</b>
<b class="nc">&nbsp;            boolean eligible = ((HonorsStudent) student).checkHonorsEligibility();</b>
<b class="nc">&nbsp;            System.out.println(&quot;Honors Eligible: &quot; + (eligible ? &quot;Yes&quot; : &quot;No&quot;));</b>
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;Status: Active&quot;);</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void viewStudents(StudentManager studentManager) {
<b class="nc">&nbsp;        if (studentManager.getStudentCount() == 0) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;No students to display yet.&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;\nSTUDENT LISTING&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(80));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%-8s | %-18s | %-8s | %-10s | %-8s%n&quot;,</b>
&nbsp;                &quot;STU ID&quot;, &quot;NAME&quot;, &quot;TYPE&quot;, &quot;AVG GRADE&quot;, &quot;STATUS&quot;);
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(80));</b>
<b class="nc">&nbsp;        for (Student s : studentManager.getStudents()) {</b>
<b class="nc">&nbsp;            System.out.printf(&quot;%-8s │ %-18s │ %-8s │ %-10.2f │ %-8s%n&quot;,</b>
<b class="nc">&nbsp;                    s.getStudentId(), truncateName(s.getName()), s.getStudentType(),</b>
<b class="nc">&nbsp;                    s.calculateAverageGrade(), (s.isPassing() ? &quot;Passing&quot; : &quot;Failing&quot;));</b>
<b class="nc">&nbsp;            if (&quot;Honors&quot;.equals(s.getStudentType())) {</b>
<b class="nc">&nbsp;                boolean eligible = (s instanceof HonorsStudent) &amp;&amp; ((HonorsStudent) s).checkHonorsEligibility();</b>
<b class="nc">&nbsp;                System.out.printf(&quot;        Enrolled Subjects: %d | Passing Grade: %.0f%% |     Honors Eligible: %s%n&quot;,</b>
<b class="nc">&nbsp;                        s.getEnrolledSubjectCount(), s.getPassingGrade(), (eligible ? &quot;Yes&quot; : &quot;No&quot;));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.printf(&quot;        Enrolled Subjects: %d | Passing Grade: %.0f%%%n&quot;,</b>
<b class="nc">&nbsp;                        s.getEnrolledSubjectCount(), s.getPassingGrade());</b>
&nbsp;            }
<b class="nc">&nbsp;            System.out.println(&quot;─&quot;.repeat(80));</b>
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;Total Students: &quot; + studentManager.getStudentCount());</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Average Class Grade: %.2f%n&quot;, studentManager.getAverageClassGrade());</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        new Scanner(System.in).nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;    private static String truncateName(String name) {
<b class="nc">&nbsp;        return name.length() &gt; 18 ? name.substring(0, 18 - 3) + &quot;...&quot; : name;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static void recordGrade(Scanner scanner, StudentManager studentManager, GradeManager gradeManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nRECORD GRADE&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(40));</b>
&nbsp;        Student student;
&nbsp;        Subject subject;
&nbsp;        while (true) {
<b class="nc">&nbsp;            System.out.print(&quot;\nEnter Student ID: &quot;);</b>
<b class="nc">&nbsp;            String inputId = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;            String studentId = inputId.toUpperCase();</b>
&nbsp;
&nbsp;            try {
<b class="nc">&nbsp;                student = studentManager.findStudent(studentId);</b>
<b class="nc">&nbsp;                if (student == null) throw new StudentNotFoundException(studentId);</b>
<b class="nc">&nbsp;                System.out.println(&quot;\nStudent Details:&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;Name: &quot; + student.getName());</b>
<b class="nc">&nbsp;                System.out.println(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;                System.out.printf(&quot;Current Average: %.2f%n&quot;, student.calculateAverageGrade());</b>
&nbsp;                break;
&nbsp;            } catch (StudentNotFoundException snfe) {
<b class="nc">&nbsp;                System.out.println(&quot;\n✗ ERROR: StudentNotFoundException&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;  &quot; + snfe.getMessage());</b>
<b class="nc">&nbsp;                System.out.println();</b>
<b class="nc">&nbsp;                Student[] all = studentManager.getStudents();</b>
<b class="nc">&nbsp;                StringBuilder ids = new StringBuilder(&quot;  Available student IDs: &quot;);</b>
<b class="nc">&nbsp;                for (int i = 0; i &lt; all.length; i++) {</b>
<b class="nc">&nbsp;                    ids.append(all[i].getStudentId());</b>
<b class="nc">&nbsp;                    if (i &lt; all.length - 1) ids.append(&quot;, &quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                System.out.println(ids);</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nTry again? (Y/N): &quot;);</b>
<b class="nc">&nbsp;                String retry = scanner.nextLine().trim().toUpperCase();</b>
<b class="nc">&nbsp;                if (!&quot;Y&quot;.equals(retry)) return;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nSubject type:&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;1. Core Subject (Mathematics, English, Science)&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;2. Elective Subject (Music, Art ,Physical Education)&quot;);</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nSelect type (1-2): &quot;);</b>
&nbsp;        int subjectType;
&nbsp;        try {
<b class="nc">&nbsp;            subjectType = Integer.parseInt(scanner.nextLine());</b>
&nbsp;        } catch (NumberFormatException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Invalid subject type.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String[] coreSubjects = {&quot;Mathematics&quot;, &quot;English&quot;, &quot;Science&quot;};</b>
<b class="nc">&nbsp;        String[] electiveSubjects = {&quot;Music&quot;, &quot;Art&quot;, &quot;Physical Education&quot;};</b>
&nbsp;
<b class="nc">&nbsp;        if (subjectType == 1) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;\nAvailable Core Subjects:&quot;);</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; coreSubjects.length; i++) {</b>
<b class="nc">&nbsp;                System.out.println((i + 1) + &quot;. &quot; + coreSubjects[i]);</b>
&nbsp;            }
<b class="nc">&nbsp;            System.out.print(&quot;\nSelect subject (1-3): &quot;);</b>
<b class="nc">&nbsp;            int choice = Integer.parseInt(scanner.nextLine());</b>
<b class="nc">&nbsp;            if (choice &gt;= 1 &amp;&amp; choice &lt;= 3) {</b>
<b class="nc">&nbsp;                subject = new CoreSubject(coreSubjects[choice - 1], &quot;C&quot; + (int) (Math.random() * 1000));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice.&quot;);</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;                scanner.nextLine();</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;        } else if (subjectType == 2) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;\nAvailable Elective Subjects:&quot;);</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; electiveSubjects.length; i++) {</b>
<b class="nc">&nbsp;                System.out.println((i + 1) + &quot;. &quot; + electiveSubjects[i]);</b>
&nbsp;            }
<b class="nc">&nbsp;            System.out.print(&quot;\nSelect subject (1-3): &quot;);</b>
<b class="nc">&nbsp;            int choice = Integer.parseInt(scanner.nextLine());</b>
<b class="nc">&nbsp;            if (choice &gt;= 1 &amp;&amp; choice &lt;= 3) {</b>
<b class="nc">&nbsp;                subject = new ElectiveSubject(electiveSubjects[choice - 1], &quot;E&quot; + (int) (Math.random() * 1000));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice.&quot;);</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;                scanner.nextLine();</b>
&nbsp;                return;
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;Invalid subject type.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;        double gradeValue;
&nbsp;        while (true) {
<b class="nc">&nbsp;            System.out.print(&quot;\nEnter grade (0-100): &quot;);</b>
<b class="nc">&nbsp;            String gradeStr = scanner.nextLine().trim();</b>
&nbsp;            try {
<b class="nc">&nbsp;                double g = Double.parseDouble(gradeStr);</b>
<b class="nc">&nbsp;                if (g &lt; 0 || g &gt; 100) throw new InvalidGradeException(g);</b>
<b class="nc">&nbsp;                gradeValue = g;</b>
&nbsp;                break; // valid -&gt; proceed to confirmation
&nbsp;            } catch (NumberFormatException nfe) {
<b class="nc">&nbsp;                System.out.println(&quot;\n✗ ERROR: NumberFormatException&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;  Grade must be a number between 0 and 100.&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;  You entered: &quot; + gradeStr);</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nTry again? (Y/N): &quot;);</b>
<b class="nc">&nbsp;                String retry = scanner.nextLine().trim().toUpperCase();</b>
<b class="nc">&nbsp;                if (!&quot;Y&quot;.equals(retry)) return;</b>
&nbsp;            } catch (InvalidGradeException ige) {
<b class="nc">&nbsp;                System.out.println(&quot;\n✗ ERROR: InvalidGradeException&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;  &quot; + ige.getMessage());</b>
<b class="nc">&nbsp;                System.out.println(&quot;  You entered: &quot; + (gradeStr.isEmpty() ? ige.getValue() : gradeStr));</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nTry again? (Y/N): &quot;);</b>
<b class="nc">&nbsp;                String retry = scanner.nextLine().trim().toUpperCase();</b>
<b class="nc">&nbsp;                if (!&quot;Y&quot;.equals(retry)) return;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;
<b class="nc">&nbsp;        Grade grade = new Grade(student.getStudentId(), subject, gradeValue);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nGRADE CONFIRMATION&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;        System.out.println(&quot;Grade ID: &quot; + grade.getGradeId());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Student: &quot; + student.getStudentId() + &quot; - &quot; + student.getName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Subject: &quot; + subject.getSubjectName() + &quot; (&quot; + subject.getSubjectType() + &quot;)&quot;);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Grade: %.2f%n&quot;, gradeValue);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Date: &quot; + grade.getDate());</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;        System.out.print(&quot;Confirm grade? (Y/N): &quot;);</b>
<b class="nc">&nbsp;        String confirm = scanner.nextLine().trim().toUpperCase();</b>
&nbsp;
<b class="nc">&nbsp;        if (confirm.equals(&quot;Y&quot;)) {</b>
<b class="nc">&nbsp;            gradeManager.addGrade(grade);</b>
<b class="nc">&nbsp;            boolean ok = student.recordGrade(gradeValue);</b>
<b class="nc">&nbsp;            if (!ok) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Grade could not be recorded (invalid or full).&quot;);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                student.enrollSubject(subject);</b>
<b class="nc">&nbsp;                System.out.println(&quot;\n✓ Grade recorded successfully!&quot;);</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;\nGrade entry canceled.&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private static void viewGradeReport(Scanner scanner, StudentManager studentManager, GradeManager gradeManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nVIEW GRADE REPORT&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter Student ID: &quot;);</b>
<b class="nc">&nbsp;        String inputId = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;        String studentId = inputId.toUpperCase();</b>
<b class="nc">&nbsp;        Student student = studentManager.findStudent(studentId);</b>
<b class="nc">&nbsp;        if (student == null) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Student not found!&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;\nStudent: &quot; + student.getStudentId() + &quot; - &quot; + student.getName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Current Average: %.2f%n&quot;, student.calculateAverageGrade());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Status: &quot; + (student.isPassing() ? &quot;Passing&quot; : &quot;Failing&quot;));</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;        boolean hasGrades = false;</b>
<b class="nc">&nbsp;        int totalGrades = 0;</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; gradeManager.getGradeCount(); i++) {</b>
<b class="nc">&nbsp;            Grade g = gradeManager.getGradeAt(i);</b>
<b class="nc">&nbsp;            if (g != null &amp;&amp; g.getStudentId().equalsIgnoreCase(studentId)) {</b>
<b class="nc">&nbsp;                hasGrades = true;</b>
<b class="nc">&nbsp;                totalGrades++;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (!hasGrades) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;No grades recorded for this student&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;\nGRADE HISTORY&quot;);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%-8s │ %-10s │ %-20s │ %-8s │ %-7s%n&quot;,</b>
&nbsp;                &quot;GRD ID&quot;, &quot;DATE&quot;, &quot;SUBJECT&quot;, &quot;TYPE&quot;, &quot;GRADE&quot;);
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;        for (int i = gradeManager.getGradeCount() - 1; i &gt;= 0; i--) {</b>
<b class="nc">&nbsp;            Grade g = gradeManager.getGradeAt(i);</b>
<b class="nc">&nbsp;            if (g != null &amp;&amp; g.getStudentId().equalsIgnoreCase(studentId)) {</b>
<b class="nc">&nbsp;                System.out.printf(&quot;%-8s │ %-10s │ %-20s │ %-8s │ %-7s%n&quot;,</b>
<b class="nc">&nbsp;                        g.getGradeId(), g.getDate(), g.getSubject().getSubjectName(),</b>
<b class="nc">&nbsp;                        g.getSubject().getSubjectType(), g.getGrade());</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;        System.out.println(&quot;Total Grades: &quot; + totalGrades);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Core Subjects Average: %.2f%n&quot;, gradeManager.calculateCoreAverage(studentId));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Elective Subjects Average: %.2f%n&quot;, gradeManager.calculateElectiveAverage(studentId));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Overall Average: %.2f%n&quot;, gradeManager.calculateOverallAverage(studentId));</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nPerformance Summary:&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Passing all core subjects&quot;);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Meeting passing grade requirement (%.0f%%)%n&quot;, student.getPassingGrade());</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static void exportGradeReport(Scanner scanner, StudentManager studentManager, GradeManager gradeManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nEXPORT GRADE REPORT&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;Enter Student ID: &quot;);</b>
<b class="nc">&nbsp;        String inputId = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;        String studentId = inputId.toUpperCase();</b>
&nbsp;
<b class="nc">&nbsp;        Student student = studentManager.findStudent(studentId);</b>
<b class="nc">&nbsp;        if (student == null) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Student not found!&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
&nbsp;        //Gather grades for the student
<b class="nc">&nbsp;        java.util.ArrayList&lt;Grade&gt; list = new java.util.ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; gradeManager.getGradeCount(); i++) {</b>
<b class="nc">&nbsp;            Grade g = gradeManager.getGradeAt(i);</b>
<b class="nc">&nbsp;            if (g != null &amp;&amp; g.getStudentId().equalsIgnoreCase(studentId)) {</b>
<b class="nc">&nbsp;                list.add(g);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;Student: &quot; + student.getStudentId() + &quot; - &quot; + student.getName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Total Grades: &quot; + list.size());</b>
<b class="nc">&nbsp;        System.out.println();</b>
&nbsp;
<b class="nc">&nbsp;        if (list.isEmpty()) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;NOTE: No grades recorded for this student yet.&quot;);</b>
<b class="nc">&nbsp;            System.out.println();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;Export options:&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;1. Summary Report (overview only)&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;2. Detailed Report (all grades)&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;3. Both&quot;);</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nSelect option (1-3): &quot;);</b>
&nbsp;        int exportChoice;
&nbsp;        try {
<b class="nc">&nbsp;            exportChoice = Integer.parseInt(scanner.nextLine().trim());</b>
&nbsp;        } catch (NumberFormatException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Invalid choice.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        if (exportChoice &lt; 1 || exportChoice &gt; 3) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Invalid choice.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nEnter filename (without extension): &quot;);</b>
<b class="nc">&nbsp;        String baseName = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;        if (baseName.isEmpty()) baseName = student.getName().toLowerCase().replaceAll(&quot;\\s+&quot;, &quot;_&quot;) + &quot;_report&quot;;</b>
&nbsp;
<b class="nc">&nbsp;        Path reportsDir = Paths.get(&quot;./reports&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            if (!Files.exists(reportsDir)) Files.createDirectories(reportsDir);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Failed to create reports directory: &quot; + e.getMessage());</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String filename = baseName + &quot;.txt&quot;;</b>
<b class="nc">&nbsp;        Path target = reportsDir.resolve(filename);</b>
&nbsp;
&nbsp;        // 7) Compute aggregates
<b class="nc">&nbsp;        double coreAvg = gradeManager.calculateCoreAverage(studentId);</b>
<b class="nc">&nbsp;        double elecAvg = gradeManager.calculateElectiveAverage(studentId);</b>
<b class="nc">&nbsp;        double overallAvg = gradeManager.calculateOverallAverage(studentId);</b>
<b class="nc">&nbsp;        boolean passing = student.isPassing();</b>
<b class="nc">&nbsp;        boolean honorsEligible = (student instanceof HonorsStudent) &amp;&amp; ((HonorsStudent) student).checkHonorsEligibility();</b>
&nbsp;
<b class="nc">&nbsp;        try (BufferedWriter writer = new BufferedWriter(new FileWriter(target.toFile()))) {</b>
&nbsp;
&nbsp;            // Header block
<b class="nc">&nbsp;            writer.write(&quot;╔&quot; + &quot;═&quot;.repeat(50) + &quot;╗&quot;);</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;║ EXPORT GRADE REPORT&quot;);</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;╚&quot; + &quot;═&quot;.repeat(50) + &quot;╝&quot;);</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.newLine();</b>
&nbsp;
&nbsp;            // Student overview
<b class="nc">&nbsp;            writer.write(&quot;Student: &quot; + student.getStudentId() + &quot; - &quot; + student.getName());</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(String.format(&quot;Overall Average: %.2f%%&quot;, overallAvg));</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;Enrolled Subjects: &quot; + student.getEnrolledSubjectCount());</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(String.format(&quot;Passing Grade Threshold: %.0f%%&quot;, student.getPassingGrade()));</b>
<b class="nc">&nbsp;            writer.newLine();</b>
<b class="nc">&nbsp;            if (&quot;Honors&quot;.equals(student.getStudentType())) {</b>
<b class="nc">&nbsp;                writer.write(&quot;Honors Eligible: &quot; + (honorsEligible ? &quot;Yes&quot; : &quot;No&quot;));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
&nbsp;            }
<b class="nc">&nbsp;            writer.write(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;            writer.newLine();</b>
&nbsp;
&nbsp;            // Summary section
<b class="nc">&nbsp;            if (exportChoice == 1 || exportChoice == 3) {</b>
<b class="nc">&nbsp;                writer.write(&quot;SUMMARY REPORT&quot;);</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot;Total Grades: &quot; + list.size());</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(String.format(&quot;Core Subjects Average: %.2f%%&quot;, coreAvg));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(String.format(&quot;Elective Subjects Average: %.2f%%&quot;, elecAvg));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(String.format(&quot;Overall Average: %.2f%%&quot;, overallAvg));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot;Performance Summary:&quot;);</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot; - Status: &quot; + (passing ? &quot;Passing&quot; : &quot;Failing&quot;));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot; - Meets threshold (&quot; + (int) student.getPassingGrade() + &quot;%): &quot; + (passing ? &quot;Yes&quot; : &quot;No&quot;));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
&nbsp;            }
&nbsp;
&nbsp;            // Detailed table
<b class="nc">&nbsp;            if (exportChoice == 2 || exportChoice == 3) {</b>
<b class="nc">&nbsp;                writer.write(&quot;DETAILED REPORT (All Grades)&quot;);</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(String.format(&quot;%-8s | %-10s | %-20s | %-8s | %-7s&quot;,</b>
&nbsp;                        &quot;GRD ID&quot;, &quot;DATE&quot;, &quot;SUBJECT&quot;, &quot;TYPE&quot;, &quot;GRADE&quot;));
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
&nbsp;
<b class="nc">&nbsp;                for (int i = list.size() - 1; i &gt;= 0; i--) {</b>
<b class="nc">&nbsp;                    Grade g = list.get(i);</b>
<b class="nc">&nbsp;                    writer.write(String.format(&quot;%-8s | %-10s | %-20s | %-8s | %-7.2f&quot;,</b>
<b class="nc">&nbsp;                            g.getGradeId(), g.getDate(), g.getSubject().getSubjectName(),</b>
<b class="nc">&nbsp;                            g.getSubject().getSubjectType(), g.getGrade()));</b>
<b class="nc">&nbsp;                    writer.newLine();</b>
&nbsp;                }
<b class="nc">&nbsp;                writer.write(&quot;─&quot;.repeat(70));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
<b class="nc">&nbsp;                writer.write(&quot;Total Grades: &quot; + list.size());</b>
<b class="nc">&nbsp;                writer.newLine();</b>
&nbsp;            }
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Failed to export report: &quot; + e.getMessage());</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;        //show number of grades recorded
<b class="nc">&nbsp;        long bytes = 0L;</b>
&nbsp;        try {
<b class="nc">&nbsp;            bytes = Files.size(target);</b>
&nbsp;        } catch (IOException ignored) {
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String sizeText = String.format(&quot;%.1f KB&quot;, bytes / 1024.0);</b>
<b class="nc">&nbsp;        int gradeCount = list.size();</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\n✓ Report exported successfully!&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;  File: &quot; + target.getFileName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;  Location: ./reports/&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;  Size: &quot; + sizeText);</b>
&nbsp;
<b class="nc">&nbsp;        if (exportChoice == 1) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;  Contains: overview only, averages, performance summary&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;  Contains: &quot; + gradeCount + &quot; grades, averages, performance summary&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static void calculateStudentGPA(Scanner scanner, StudentManager studentManager, GradeManager gradeManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nCALCULATE STUDENT GPA&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;        System.out.print(&quot;Enter Student ID: &quot;);</b>
<b class="nc">&nbsp;        String inputId = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;        String studentId = inputId.toUpperCase();</b>
<b class="nc">&nbsp;        Student student = studentManager.findStudent(studentId);</b>
<b class="nc">&nbsp;        if (student == null) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Student not found!&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;        // Collect grades for this student
<b class="nc">&nbsp;        List&lt;Grade&gt; grades = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; gradeManager.getGradeCount(); i++) {</b>
<b class="nc">&nbsp;            Grade g = gradeManager.getGradeAt(i);</b>
<b class="nc">&nbsp;            if (g != null &amp;&amp; g.getStudentId().equalsIgnoreCase(studentId)) {</b>
<b class="nc">&nbsp;                grades.add(g);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (grades.isEmpty()) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;No grades recorded for this student.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;\nStudent: &quot; + student.getStudentId() + &quot; - &quot; + student.getName());</b>
<b class="nc">&nbsp;        System.out.println(&quot;Type: &quot; + student.getStudentType());</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Overall Average: %.2f%%%n&quot;, student.calculateAverageGrade());</b>
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;GPA CALCULATION (4.0 Scale)&quot;);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%-12s │ %-6s │ %-10s%n&quot;, &quot;Subject&quot;, &quot;Grade&quot;, &quot;GPA Points&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(40));</b>
<b class="nc">&nbsp;        double gpaSum = 0.0;</b>
<b class="nc">&nbsp;        for (Grade g : grades) {</b>
<b class="nc">&nbsp;            GPAMap map = toGPA(g.getGrade());</b>
<b class="nc">&nbsp;            System.out.printf(&quot;%-12s │ %5.0f%% │ %.1f (%s)%n&quot;,</b>
<b class="nc">&nbsp;                    g.getSubject().getSubjectName(), g.getGrade(), map.points, map.letter);</b>
&nbsp;
&nbsp;        }
<b class="nc">&nbsp;        double cumulativeGpa = gpaSum / grades.size();</b>
<b class="nc">&nbsp;        GPAMap overallLetter = toGPA(student.calculateAverageGrade());</b>
&nbsp;        // Class rank among current students by cumulative GPA
<b class="nc">&nbsp;        int totalStudents = studentManager.getStudentCount();</b>
<b class="nc">&nbsp;        double[] gpas = new double[totalStudents];</b>
<b class="nc">&nbsp;        Student[] all = studentManager.getStudents();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; totalStudents; i++) {</b>
&nbsp;            // compute GPA for each student using their recorded grades in GradeManager
<b class="nc">&nbsp;            List&lt;Grade&gt; gs = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;            String sid = all[i].getStudentId();</b>
<b class="nc">&nbsp;            for (int j = 0; j &lt; gradeManager.getGradeCount(); j++) {</b>
<b class="nc">&nbsp;                Grade gg = gradeManager.getGradeAt(j);</b>
<b class="nc">&nbsp;                if (gg != null &amp;&amp; gg.getStudentId().equalsIgnoreCase(sid)) {</b>
<b class="nc">&nbsp;                    gs.add(gg);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (gs.isEmpty()) {</b>
<b class="nc">&nbsp;                gpas[i] = 0.0;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                double sum = 0.0;</b>
<b class="nc">&nbsp;                for (Grade gg : gs) sum += toGPA(gg.getGrade()).points;</b>
<b class="nc">&nbsp;                gpas[i] = sum / gs.size();</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        int rank = 1;</b>
<b class="nc">&nbsp;        for (double other : gpas) {</b>
<b class="nc">&nbsp;            if (other &gt; cumulativeGpa) rank++;</b>
&nbsp;        }
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Cumulative GPA: %.2f / 4.0%n&quot;, cumulativeGpa);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Letter Grade: %s%n&quot;, overallLetter.letter);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Class Rank: %d of %d%n&quot;, rank, totalStudents);</b>
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;Performance Analysis:&quot;);</b>
<b class="nc">&nbsp;        System.out.println((cumulativeGpa &gt;= 3.5 ? &quot;✓&quot; : &quot;•&quot;) + &quot; Excellent performance (3.5+ GPA)&quot;);</b>
<b class="nc">&nbsp;        boolean honorsEligible = (student instanceof HonorsStudent) &amp;&amp; ((HonorsStudent) student).checkHonorsEligibility();</b>
<b class="nc">&nbsp;        System.out.println((honorsEligible ? &quot;✓&quot; : &quot;•&quot;) + &quot; Honors eligibility maintained&quot;);</b>
<b class="nc">&nbsp;        double classAvgGpa = 0.0;</b>
<b class="nc">&nbsp;        for (double v : gpas) classAvgGpa += v;</b>
<b class="nc">&nbsp;        classAvgGpa = totalStudents == 0 ? 0.0 : classAvgGpa / totalStudents;</b>
<b class="nc">&nbsp;        System.out.printf((cumulativeGpa &gt;= classAvgGpa ? &quot;✓&quot; : &quot;•&quot;) + &quot; Above class average (%.2f GPA)%n&quot;, classAvgGpa);</b>
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;
<b class="nc">&nbsp;    private record GPAMap(double points, String letter) {</b>
&nbsp;    }
&nbsp;
&nbsp;    private static GPAMap toGPA(double pct) {
<b class="nc">&nbsp;        if (pct &gt;= 93) return new GPAMap(4.0, &quot;A&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 90) return new GPAMap(3.7, &quot;A-&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 87) return new GPAMap(3.3, &quot;B+&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 83) return new GPAMap(3.0, &quot;B&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 80) return new GPAMap(2.7, &quot;B-&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 77) return new GPAMap(2.3, &quot;C+&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 73) return new GPAMap(2.0, &quot;C&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 70) return new GPAMap(1.7, &quot;C-&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 67) return new GPAMap(1.3, &quot;D+&quot;);</b>
<b class="nc">&nbsp;        if (pct &gt;= 60) return new GPAMap(1.0, &quot;D&quot;);</b>
<b class="nc">&nbsp;        return new GPAMap(0.0, &quot;F&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static void bulkImportGrades(Scanner scanner,
&nbsp;                                         StudentManager studentManager,
&nbsp;                                         GradeManager gradeManager) {
<b class="nc">&nbsp;        System.out.println(&quot;\nBULK IMPORT GRADES&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;Place your CSV file in: ./imports/&quot;);</b>
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;CSV Format Required:&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;StudentID,SubjectName,SubjectType,Grade&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Example: STU001,Mathematics,Core,85&quot;);</b>
<b class="nc">&nbsp;        System.out.println();</b>
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;Enter filename (without extension): &quot;);</b>
<b class="nc">&nbsp;        String baseName = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;        if (baseName.isEmpty()) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Filename cannot be empty.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Path importsDir = Paths.get(&quot;./imports&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            if (!Files.exists(importsDir)) Files.createDirectories(importsDir);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Failed to ensure imports directory: &quot; + e.getMessage());</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Path csvPath = importsDir.resolve(baseName + &quot;.csv&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nValidating file... &quot;);</b>
<b class="nc">&nbsp;        if (!Files.exists(csvPath) || !Files.isRegularFile(csvPath)) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;✗&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;File not found: &quot; + csvPath);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;✓&quot;);</b>
&nbsp;        }
&nbsp;
&nbsp;        // Prepare log file
<b class="nc">&nbsp;        String ts = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyyMMdd_HHmmss&quot;));</b>
<b class="nc">&nbsp;        Path logPath = importsDir.resolve(&quot;import_log_&quot; + ts + &quot;.txt&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;Processing grades...&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        int totalRows = 0;</b>
<b class="nc">&nbsp;        int success = 0;</b>
<b class="nc">&nbsp;        int failed = 0;</b>
<b class="nc">&nbsp;        java.util.List&lt;String&gt; failures = new java.util.ArrayList&lt;&gt;();</b>
&nbsp;
&nbsp;        // Read CSV
<b class="nc">&nbsp;        try (BufferedReader br = Files.newBufferedReader(csvPath, StandardCharsets.UTF_8);</b>
<b class="nc">&nbsp;             BufferedWriter log = Files.newBufferedWriter(logPath, StandardCharsets.UTF_8)) {</b>
&nbsp;
&nbsp;            String line;
<b class="nc">&nbsp;            int rowNum = 0;</b>
&nbsp;
<b class="nc">&nbsp;            while ((line = br.readLine()) != null) {</b>
<b class="nc">&nbsp;                rowNum++;</b>
<b class="nc">&nbsp;                line = line.trim();</b>
<b class="nc">&nbsp;                if (line.isEmpty()) continue;</b>
&nbsp;
<b class="nc">&nbsp;                if (rowNum == 1 &amp;&amp; line.toLowerCase().startsWith(&quot;studentid,&quot;)) {</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                totalRows++;</b>
&nbsp;
<b class="nc">&nbsp;                String[] parts = line.split(&quot;,&quot;, -1); // keep empty tokens</b>
<b class="nc">&nbsp;                if (parts.length != 4) {</b>
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Invalid column count (&quot; + parts.length + &quot;)&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                String sid     = parts[0].trim().toUpperCase();</b>
<b class="nc">&nbsp;                String subj    = parts[1].trim();</b>
<b class="nc">&nbsp;                String type    = parts[2].trim();</b>
<b class="nc">&nbsp;                String gradeStr= parts[3].trim();</b>
&nbsp;
&nbsp;                // Validate student
<b class="nc">&nbsp;                Student student = studentManager.findStudent(sid);</b>
<b class="nc">&nbsp;                if (student == null) {</b>
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Invalid student ID (&quot; + sid + &quot;)&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
&nbsp;                // Validate subject type
<b class="nc">&nbsp;                boolean isCore = &quot;Core&quot;.equalsIgnoreCase(type);</b>
<b class="nc">&nbsp;                boolean isElective = &quot;Elective&quot;.equalsIgnoreCase(type);</b>
<b class="nc">&nbsp;                if (!isCore &amp;&amp; !isElective) {</b>
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Invalid subject type (&quot; + type + &quot;)&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
&nbsp;                // Parse and validate grade
&nbsp;                double pct;
&nbsp;                try {
<b class="nc">&nbsp;                    pct = Double.parseDouble(gradeStr);</b>
&nbsp;                } catch (NumberFormatException nfe) {
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Grade not a number (&quot; + gradeStr + &quot;)&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
<b class="nc">&nbsp;                if (pct &lt; 0 || pct &gt; 100) {</b>
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Grade out of range (&quot; + gradeStr + &quot;)&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Subject subject = isCore</b>
<b class="nc">&nbsp;                        ? new CoreSubject(subj, &quot;C&quot; + (int) (Math.random() * 1000))</b>
<b class="nc">&nbsp;                        : new ElectiveSubject(subj, &quot;E&quot; + (int) (Math.random() * 1000));</b>
&nbsp;
<b class="nc">&nbsp;                Grade grade = new Grade(sid, subject, pct);</b>
<b class="nc">&nbsp;                gradeManager.addGrade(grade);</b>
&nbsp;
&nbsp;                // Record grade via Gradable
<b class="nc">&nbsp;                boolean ok = student.recordGrade(pct);</b>
<b class="nc">&nbsp;                if (!ok) {</b>
<b class="nc">&nbsp;                    failed++;</b>
<b class="nc">&nbsp;                    String reason = &quot;Row &quot; + rowNum + &quot;: Student grade storage full or invalid&quot;;</b>
<b class="nc">&nbsp;                    failures.add(reason);</b>
<b class="nc">&nbsp;                    log.write(reason); log.newLine();</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                student.enrollSubject(subject);</b>
&nbsp;
<b class="nc">&nbsp;                success++;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            log.newLine();</b>
<b class="nc">&nbsp;            log.write(&quot;IMPORT SUMMARY&quot;); log.newLine();</b>
<b class="nc">&nbsp;            log.write(&quot;Total Rows: &quot; + totalRows); log.newLine();</b>
<b class="nc">&nbsp;            log.write(&quot;Successfully Imported: &quot; + success); log.newLine();</b>
<b class="nc">&nbsp;            log.write(&quot;Failed: &quot; + failed); log.newLine();</b>
&nbsp;
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Import failed due to I/O error: &quot; + e.getMessage());</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;IMPORT SUMMARY&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;        System.out.println(&quot;Total Rows: &quot; + totalRows);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Successfully Imported: &quot; + success);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Failed: &quot; + failed);</b>
&nbsp;
<b class="nc">&nbsp;        if (!failures.isEmpty()) {</b>
<b class="nc">&nbsp;            System.out.println();</b>
<b class="nc">&nbsp;            System.out.println(&quot;Failed Records:&quot;);</b>
<b class="nc">&nbsp;            for (String f : failures) System.out.println(f);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.println(&quot;✓ Import completed!&quot;);</b>
<b class="nc">&nbsp;        System.out.println(success + &quot; grades added to system&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;See &quot; + logPath.getFileName() + &quot; for details&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void viewClassStatistics(Scanner scanner,
&nbsp;                                            StudentManager studentManager,
&nbsp;                                            GradeManager gradeManager) {
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nCLASS STATISTICS&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(60));</b>
&nbsp;
&nbsp;        // Collect all grades
<b class="nc">&nbsp;        java.util.List&lt;Grade&gt; allGrades = new java.util.ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; gradeManager.getGradeCount(); i++) {</b>
<b class="nc">&nbsp;            Grade g = gradeManager.getGradeAt(i);</b>
<b class="nc">&nbsp;            if (g != null) allGrades.add(g);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int totalStudents = studentManager.getStudentCount();</b>
<b class="nc">&nbsp;        int totalGrades = allGrades.size();</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nTotal Students: &quot; + totalStudents);</b>
<b class="nc">&nbsp;        System.out.println(&quot;Total Grades Recorded: &quot; + totalGrades);</b>
&nbsp;
<b class="nc">&nbsp;        if (totalGrades == 0) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;\nNo grades in the system yet.&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;            scanner.nextLine();</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
&nbsp;        //Grade distribution
<b class="nc">&nbsp;        int a = 0, b = 0, c = 0, d = 0, f = 0;</b>
<b class="nc">&nbsp;        double min = 101, max = -1;</b>
<b class="nc">&nbsp;        Grade minG = null, maxG = null;</b>
&nbsp;
<b class="nc">&nbsp;        for (Grade g : allGrades) {</b>
<b class="nc">&nbsp;            double v = g.getGrade();</b>
<b class="nc">&nbsp;            if (v &gt; max) { max = v; maxG = g; }</b>
<b class="nc">&nbsp;            if (v &lt; min) { min = v; minG = g; }</b>
<b class="nc">&nbsp;            if (v &gt;= 90) a++;</b>
<b class="nc">&nbsp;            else if (v &gt;= 80) b++;</b>
<b class="nc">&nbsp;            else if (v &gt;= 70) c++;</b>
<b class="nc">&nbsp;            else if (v &gt;= 60) d++;</b>
<b class="nc">&nbsp;            else f++;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nGRADE DISTRIBUTION&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(60));</b>
<b class="nc">&nbsp;        printBand(&quot;90–100% (A):&quot;, a, totalGrades);</b>
<b class="nc">&nbsp;        printBand(&quot;80–89%  (B):&quot;, b, totalGrades);</b>
<b class="nc">&nbsp;        printBand(&quot;70–79%  (C):&quot;, c, totalGrades);</b>
<b class="nc">&nbsp;        printBand(&quot;60–69%  (D):&quot;, d, totalGrades);</b>
<b class="nc">&nbsp;        printBand(&quot;0–59%   (F):&quot;, f, totalGrades);</b>
&nbsp;
&nbsp;        //Statistical analysis
&nbsp;        // Mean
<b class="nc">&nbsp;        double sum = 0.0;</b>
<b class="nc">&nbsp;        for (Grade g : allGrades) sum += g.getGrade();</b>
<b class="nc">&nbsp;        double mean = sum / totalGrades;</b>
&nbsp;
&nbsp;        // Median
<b class="nc">&nbsp;        double[] arr = new double[totalGrades];</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; totalGrades; i++) arr[i] = allGrades.get(i).getGrade();</b>
<b class="nc">&nbsp;        java.util.Arrays.sort(arr);</b>
<b class="nc">&nbsp;        double median = (totalGrades % 2 == 1)</b>
<b class="nc">&nbsp;                ? arr[totalGrades / 2]</b>
<b class="nc">&nbsp;                : (arr[totalGrades / 2 - 1] + arr[totalGrades / 2]) / 2.0;</b>
&nbsp;
&nbsp;        // Mode
<b class="nc">&nbsp;        java.util.Map&lt;Integer, Integer&gt; freq = new java.util.HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;        for (double v : arr) {</b>
<b class="nc">&nbsp;            int r = (int) Math.round(v);</b>
<b class="nc">&nbsp;            freq.put(r, freq.getOrDefault(r, 0) + 1);</b>
&nbsp;        }
<b class="nc">&nbsp;        int modeVal = -1, bestFreq = -1;</b>
<b class="nc">&nbsp;        for (java.util.Map.Entry&lt;Integer, Integer&gt; e : freq.entrySet()) {</b>
<b class="nc">&nbsp;            int val = e.getKey(), cnt = e.getValue();</b>
<b class="nc">&nbsp;            if (cnt &gt; bestFreq || (cnt == bestFreq &amp;&amp; val &gt; modeVal)) {</b>
<b class="nc">&nbsp;                bestFreq = cnt; modeVal = val;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Population Standard Deviation
<b class="nc">&nbsp;        double sq = 0.0;</b>
<b class="nc">&nbsp;        for (double v : arr) sq += Math.pow(v - mean, 2);</b>
<b class="nc">&nbsp;        double std = Math.sqrt(sq / totalGrades);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nSTATISTICAL ANALYSIS&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(60));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Mean (Average):   %.1f%%%n&quot;, mean);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Median:           %.1f%%%n&quot;, median);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Mode:             %.1f%%%n&quot;, (double) modeVal);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Standard Deviation: %.1f%%%n&quot;, std);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Range:            %.1f%% (%.0f%% – %.0f%%)%n&quot;, (max - min), min, max);</b>
&nbsp;
&nbsp;        // Highest/Lowest grade records
<b class="nc">&nbsp;        assert maxG != null;</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%nHighest Grade: %.0f%% (%s - %s)%n&quot;,</b>
<b class="nc">&nbsp;                maxG.getGrade(), maxG.getStudentId(), maxG.getSubject().getSubjectName());</b>
<b class="nc">&nbsp;        assert minG != null;</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Lowest  Grade: %.0f%% (%s - %s)%n&quot;,</b>
<b class="nc">&nbsp;                minG.getGrade(), minG.getStudentId(), minG.getSubject().getSubjectName());</b>
&nbsp;
&nbsp;        //Subject performance
<b class="nc">&nbsp;        double coreSum = 0, coreCnt = 0, elecSum = 0, elecCnt = 0;</b>
<b class="nc">&nbsp;        java.util.Map&lt;String, double[]&gt; subjectAgg = new java.util.HashMap&lt;&gt;(); // name -&gt; [sum, count]</b>
<b class="nc">&nbsp;        for (Grade g : allGrades) {</b>
<b class="nc">&nbsp;            String type = g.getSubject().getSubjectType();</b>
<b class="nc">&nbsp;            if (&quot;Core&quot;.equalsIgnoreCase(type)) { coreSum += g.getGrade(); coreCnt++; }</b>
<b class="nc">&nbsp;            else if (&quot;Elective&quot;.equalsIgnoreCase(type)) { elecSum += g.getGrade(); elecCnt++; }</b>
&nbsp;
<b class="nc">&nbsp;            String name = g.getSubject().getSubjectName();</b>
<b class="nc">&nbsp;            double[] sc = subjectAgg.getOrDefault(name, new double[]{0.0, 0.0});</b>
<b class="nc">&nbsp;            sc[0] += g.getGrade(); sc[1] += 1.0;</b>
<b class="nc">&nbsp;            subjectAgg.put(name, sc);</b>
&nbsp;        }
<b class="nc">&nbsp;        double coreAvg = coreCnt == 0 ? 0.0 : coreSum / coreCnt;</b>
<b class="nc">&nbsp;        double elecAvg = elecCnt == 0 ? 0.0 : elecSum / elecCnt;</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nSUBJECT PERFORMANCE&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(60));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Core Subjects:     %.1f%% average%n&quot;, coreAvg);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;Mathematics&quot;);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;English&quot;);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;Science&quot;);</b>
<b class="nc">&nbsp;        System.out.println();</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Elective Subjects: %.1f%% average%n&quot;, elecAvg);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;Music&quot;);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;Art&quot;);</b>
<b class="nc">&nbsp;        printSubjectAvg(subjectAgg, &quot;Physical Education&quot;);</b>
&nbsp;
&nbsp;        //Student type comparison
<b class="nc">&nbsp;        java.util.Map&lt;String, Integer&gt; gradesPerStudent = new java.util.HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Grade g : allGrades) {</b>
<b class="nc">&nbsp;            gradesPerStudent.put(g.getStudentId(), gradesPerStudent.getOrDefault(g.getStudentId(), 0) + 1);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        double regSumAvg = 0.0; int regCount = 0;</b>
<b class="nc">&nbsp;        double honSumAvg = 0.0; int honCount = 0;</b>
<b class="nc">&nbsp;        for (Student s : studentManager.getStudents()) {</b>
<b class="nc">&nbsp;            Integer scnt = gradesPerStudent.get(s.getStudentId());</b>
<b class="nc">&nbsp;            if (scnt == null || scnt == 0) continue; // skip students with no grades</b>
<b class="nc">&nbsp;            double avg = s.calculateAverageGrade();</b>
<b class="nc">&nbsp;            if (&quot;Regular&quot;.equalsIgnoreCase(s.getStudentType())) { regSumAvg += avg; regCount++; }</b>
<b class="nc">&nbsp;            else if (&quot;Honors&quot;.equalsIgnoreCase(s.getStudentType())) { honSumAvg += avg; honCount++; }</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\nSTUDENT TYPE COMPARISON&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(60));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Regular Students: %.1f%% average (%d students)%n&quot;,</b>
<b class="nc">&nbsp;                regCount == 0 ? 0.0 : regSumAvg / regCount, regCount);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;Honors Students:  %.1f%% average (%d students)%n&quot;,</b>
<b class="nc">&nbsp;                honCount == 0 ? 0.0 : honSumAvg / honCount, honCount);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.print(&quot;\nPress Enter to continue...&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;    }
&nbsp;
&nbsp;    //helpers for Class Statistics
&nbsp;    private static void printBand(String label, int count, int total) {
<b class="nc">&nbsp;        double pct = total == 0 ? 0.0 : (count * 100.0 / total);</b>
<b class="nc">&nbsp;        String bar = buildBar(count, total, 28);</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%-13s %s  %4.1f%% (%d grades)%n&quot;, label, bar, pct, count);</b>
&nbsp;    }
&nbsp;
&nbsp;    private static String buildBar(int count, int total, int width) {
<b class="nc">&nbsp;        int filled = (total == 0) ? 0 : (int) Math.round((count * 1.0 / total) * width);</b>
<b class="nc">&nbsp;        if (filled &lt; 0) filled = 0; if (filled &gt; width) filled = width;</b>
<b class="nc">&nbsp;        String filledPart = &quot;█&quot;.repeat(filled);</b>
<b class="nc">&nbsp;        String emptyPart  = &quot;░&quot;.repeat(width - filled);</b>
<b class="nc">&nbsp;        return filledPart + emptyPart;</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void printSubjectAvg(java.util.Map&lt;String, double[]&gt; agg, String subject) {
<b class="nc">&nbsp;        double[] sc = agg.get(subject);</b>
<b class="nc">&nbsp;        if (sc != null &amp;&amp; sc[1] &gt; 0) {</b>
<b class="nc">&nbsp;            double avg = sc[0] / sc[1];</b>
<b class="nc">&nbsp;            System.out.printf(&quot;%s: %6.1f%%%s%n&quot;, subject, avg, &quot;&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.printf(&quot;%s: %6.1f%%%n&quot;, subject, 0.0);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static void searchStudents(Scanner scanner,
&nbsp;                                       StudentManager studentManager,
&nbsp;                                       GradeManager gradeManager) {
&nbsp;        while (true) {
<b class="nc">&nbsp;            System.out.println(&quot;\nSEARCH STUDENTS&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;
<b class="nc">&nbsp;            System.out.println(&quot;\nSearch options:&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;1. By Student ID&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;2. By Name (partial match)&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;3. By Grade Range&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;4. By Student Type&quot;);</b>
<b class="nc">&nbsp;            System.out.print(&quot;\nSelect option (1-4): &quot;);</b>
&nbsp;
&nbsp;            int opt;
&nbsp;            try {
<b class="nc">&nbsp;                opt = Integer.parseInt(scanner.nextLine().trim());</b>
&nbsp;            } catch (NumberFormatException e) {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice. Please enter 1-4.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
<b class="nc">&nbsp;            if (opt &lt; 1 || opt &gt; 4) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice. Please enter 1-4.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
&nbsp;            // Gather results
<b class="nc">&nbsp;            java.util.List&lt;Student&gt; results = new java.util.ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;            Student[] all = studentManager.getStudents();</b>
&nbsp;
<b class="nc">&nbsp;            switch (opt) {</b>
&nbsp;                case 1 -&gt; {
<b class="nc">&nbsp;                    System.out.print(&quot;\nEnter ID (partial or full): &quot;);</b>
<b class="nc">&nbsp;                    String q = scanner.nextLine().trim().toUpperCase();</b>
<b class="nc">&nbsp;                    for (Student s : all) {</b>
<b class="nc">&nbsp;                        if (s.getStudentId().toUpperCase().contains(q)) results.add(s);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                case 2 -&gt; {
<b class="nc">&nbsp;                    System.out.print(&quot;\nEnter name (partial or full): &quot;);</b>
<b class="nc">&nbsp;                    String q = scanner.nextLine().trim().toLowerCase();</b>
<b class="nc">&nbsp;                    for (Student s : all) {</b>
<b class="nc">&nbsp;                        if (s.getName().toLowerCase().contains(q)) results.add(s);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                case 3 -&gt; {
&nbsp;                    double min, max;
&nbsp;                    try {
<b class="nc">&nbsp;                        System.out.print(&quot;\nEnter minimum average (0-100): &quot;);</b>
<b class="nc">&nbsp;                        min = Double.parseDouble(scanner.nextLine().trim());</b>
<b class="nc">&nbsp;                        System.out.print(&quot;Enter maximum average (0-100): &quot;);</b>
<b class="nc">&nbsp;                        max = Double.parseDouble(scanner.nextLine().trim());</b>
&nbsp;                    } catch (NumberFormatException e) {
<b class="nc">&nbsp;                        System.out.println(&quot;Invalid number. Try again.&quot;);</b>
&nbsp;                        continue;
&nbsp;                    }
<b class="nc">&nbsp;                    if (min &gt; max) {</b>
<b class="nc">&nbsp;                        double t = min; min = max; max = t;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    for (Student s : all) {</b>
<b class="nc">&nbsp;                        double avg = s.calculateAverageGrade();</b>
<b class="nc">&nbsp;                        if (avg &gt;= min &amp;&amp; avg &lt;= max) results.add(s);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                case 4 -&gt; {
<b class="nc">&nbsp;                    System.out.print(&quot;\nEnter type (Regular/Honors): &quot;);</b>
<b class="nc">&nbsp;                    String q = scanner.nextLine().trim();</b>
<b class="nc">&nbsp;                    for (Student s : all) {</b>
<b class="nc">&nbsp;                        if (s.getStudentType().equalsIgnoreCase(q)) results.add(s);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            printSearchResults(results);</b>
&nbsp;
&nbsp;            while (true) {
<b class="nc">&nbsp;                System.out.println(&quot;\nActions:&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;1. View full details for a student&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;2. Export search results&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;3. New search&quot;);</b>
<b class="nc">&nbsp;                System.out.println(&quot;4. Return to main menu&quot;);</b>
<b class="nc">&nbsp;                System.out.print(&quot;\nEnter choice: &quot;);</b>
&nbsp;
&nbsp;                int action;
&nbsp;                try {
<b class="nc">&nbsp;                    action = Integer.parseInt(scanner.nextLine().trim());</b>
&nbsp;                } catch (NumberFormatException e) {
<b class="nc">&nbsp;                    System.out.println(&quot;Invalid choice. Enter 1-4.&quot;);</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (action == 1) {</b>
<b class="nc">&nbsp;                    viewGradeReport(scanner, studentManager, gradeManager);</b>
<b class="nc">&nbsp;                } else if (action == 2) {</b>
<b class="nc">&nbsp;                    exportSearchResults(results);</b>
<b class="nc">&nbsp;                } else if (action == 3) {</b>
&nbsp;                    break;
<b class="nc">&nbsp;                } else if (action == 4) {</b>
&nbsp;                    return;
&nbsp;                } else {
<b class="nc">&nbsp;                    System.out.println(&quot;Invalid choice. Enter 1-4.&quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private static void printSearchResults(java.util.List&lt;Student&gt; results) {
<b class="nc">&nbsp;        System.out.println(&quot;\nSEARCH RESULTS (&quot; + results.size() + &quot; found)&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
<b class="nc">&nbsp;        System.out.printf(&quot;%-8s │ %-18s │ %-8s │ %-5s%n&quot;, &quot;STU ID&quot;, &quot;NAME&quot;, &quot;TYPE&quot;, &quot;AVG&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;
<b class="nc">&nbsp;        if (results.isEmpty()) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;(no matches)&quot;);</b>
<b class="nc">&nbsp;            System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (Student s : results) {</b>
<b class="nc">&nbsp;            System.out.printf(&quot;%-8s │ %-18s │ %-8s │ %5.1f%%%n&quot;,</b>
<b class="nc">&nbsp;                    s.getStudentId(),</b>
<b class="nc">&nbsp;                    truncateName(s.getName()),</b>
<b class="nc">&nbsp;                    s.getStudentType(),</b>
<b class="nc">&nbsp;                    s.calculateAverageGrade());</b>
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;─&quot;.repeat(50));</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void exportSearchResults(java.util.List&lt;Student&gt; results) {
&nbsp;        // Ensure ./reports exists
<b class="nc">&nbsp;        Path reportsDir = Paths.get(&quot;./reports&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            if (!Files.exists(reportsDir)) Files.createDirectories(reportsDir);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Failed to create reports directory: &quot; + e.getMessage());</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String ts = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyyMMdd_HHmmss&quot;));</b>
<b class="nc">&nbsp;        Path target = reportsDir.resolve(&quot;search_results_&quot; + ts + &quot;.txt&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        try (BufferedWriter writer = new BufferedWriter(new FileWriter(target.toFile()))) {</b>
<b class="nc">&nbsp;            writer.write(&quot;SEARCH RESULTS (&quot; + results.size() + &quot; found)&quot;); writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;─&quot;.repeat(50)); writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(String.format(&quot;%-8s │ %-18s │ %-8s │ %-5s&quot;, &quot;STU ID&quot;, &quot;NAME&quot;, &quot;TYPE&quot;, &quot;AVG&quot;)); writer.newLine();</b>
<b class="nc">&nbsp;            writer.write(&quot;─&quot;.repeat(50)); writer.newLine();</b>
&nbsp;
<b class="nc">&nbsp;            for (Student s : results) {</b>
<b class="nc">&nbsp;                writer.write(String.format(&quot;%-8s │ %-18s │ %-8s │ %5.1f%%&quot;,</b>
<b class="nc">&nbsp;                        s.getStudentId(),</b>
<b class="nc">&nbsp;                        truncateName(s.getName()),</b>
<b class="nc">&nbsp;                        s.getStudentType(),</b>
<b class="nc">&nbsp;                        s.calculateAverageGrade()));</b>
<b class="nc">&nbsp;                writer.newLine();</b>
&nbsp;            }
<b class="nc">&nbsp;            writer.write(&quot;─&quot;.repeat(50)); writer.newLine();</b>
&nbsp;
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Failed to export search results: &quot; + e.getMessage());</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        long bytes = 0;</b>
<b class="nc">&nbsp;        try { bytes = Files.size(target); } catch (IOException ignored) {}</b>
<b class="nc">&nbsp;        String sizeText = String.format(&quot;%.1f KB&quot;, bytes / 1024.0);</b>
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;\n✓ Search results exported!&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot; File: &quot; + target.getFileName());</b>
<b class="nc">&nbsp;        System.out.println(&quot; Location: ./reports/&quot;);</b>
<b class="nc">&nbsp;        System.out.println(&quot; Size: &quot; + sizeText);</b>
&nbsp;    }
&nbsp;
&nbsp;    private static class StudentNotFoundException extends Exception {
&nbsp;        public StudentNotFoundException(String id) {
<b class="nc">&nbsp;            super(&quot;Student with ID &#39;&quot; + id + &quot;&#39; not found in the system.&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private static class InvalidGradeException extends Exception {
&nbsp;        private final double value;
&nbsp;        public InvalidGradeException(double value) {
<b class="nc">&nbsp;            super(&quot;Grade must be between 0 and 100.&quot;);</b>
<b class="nc">&nbsp;            this.value = value;</b>
&nbsp;        }
<b class="nc">&nbsp;        public double getValue() { return value; }</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-12-10 04:18</div>
</div>
</body>
</html>
